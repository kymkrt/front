<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>t08_상품구매.html</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://kit.fontawesome.com/df66332deb.js" crossorigin="anonymous"></script>
  <script>
    //쉼표까지 출력
    //유효성 검사
    'use strict'
    let calcT='';
    let bagT = '';
    
    function calc() {
      calcPrice.innerHTML = '';
      calcT='';

      let price =  document.getElementById("size").value;
      let num =  document.getElementById("num").value;

      let calcu = numberWithCommas ((num*price));

      calcT += `<span class="mb-3">${calcu}원</span>`;
      
      calcPrice.innerHTML = calcT;
    }
    
    function vat() {
      calcVat.innerHTML = '';
      calcT='';
      
      let price =  document.getElementById("size").value;
      let num =  document.getElementById("num").value;
      calcT += `<span class="mb-3">${(price*num)/10}원</span>`;
      
      calcVat.innerHTML = calcT;
    }
    
    function price() {
      calcFPrice.innerHTML = '';
      calcT='';

      let price =  document.getElementById("size").value;
      let num =  document.getElementById("num").value;
      let vat = price*num/10;
      calcT += `<span class="mb-3">${(price*num)+vat}원</span>`;
      
      calcFPrice.innerHTML = calcT;
    }
    
    function bag() {
      bagDemo.innerHTML = '';
      bagT = '';
      
      let product = document.getElementById("pName").value;
      let price =  document.getElementById("size").value;
      let num =  document.getElementById("num").value;
      let pn = price*num;

      bagT += `<div class="mb-3">현재 선택하신 물건은</div><br />`;
      bagT += `<div class="mb-3">상품명 : ${pn} 사이즈(단가) : ${price}원 수량(개) : ${num}개 가격 : ${pn}원</div><br />`;

      bagDemo.innerHTML = bagT;
    }
    
    function cleanBag() {
      bagDemo.innerHTML = '';
      bagT = '';
      
      bagDemo.innerHTML = bagT;
    }

    function numberWithCommas (num) {
      return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");
    }

  </script>
</head>
<body>
  <p><br /></p>
  <div class="container">
    <h2>상품 가격 계산</h2>
    <form id="myform" class="mb-3">
      상품명 : <div>
        <input type="text" name="pName" id="pName" class="form-control mb-3" />
      </div>
      사이즈(단가) : <div>
        <select name="size" id="size" class="form-control mb-3" >
          <option value="5000">S사이즈(5000)</option>
          <option value="6000">M사이즈(6000)</option>
          <option value="7000">L사이즈(7000)</option>
          <option value="8000">XL사이즈(8000)</option>
          <option value="9000">XLL사이즈(9000)</option>
        </select>
      </div>
      수량 : <div>
        <input type="text" name="num" id="num" class="form-control mb-3" />
      </div>
      <span><input type="button" value="계산" onclick="calc()" class="btn btn-success mr-1" /></span>
      <span><input type="button" value="VAT" onclick="vat()" class="btn btn-primary mr-1" /></span>
      <span><input type="button" value="총가격(price+vat)" onclick="price()" class="btn btn-info mr-100" /></span>
      <span><input type="button" value="장바구니" onclick="bag()" class="btn btn-warning ml-50" /></span>
      <span><input type="button" value="장바구니 비우기" onclick="cleanBag()" class="btn btn-danger" /></span>
    </form>
    <div>
      <table class="table">
        <tr>
          <td>
            <div class="mb-3">
              <i class="fa-solid fa-shirt"></i>가격(단가*수량) : <span id="calcPrice" class="mb-10"></span>
            </div>
            <div class="mb-3">
              <i class="fa-solid fa-shirt"></i>VAT(가격의 10%) : <span id="calcVat" class="mb-3"></span>
            </div>
            <div class="mb-3">
              <i class="fa-solid fa-shirt"></i>총판매가(VAT포함) : <span id="calcFPrice"class="mb-3"></span>
            </div>
          </td>
        </tr>
      </table>
    </div>
    <div id="bagDemo"></div>
  </div>
</body>
</html>