<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ex3_jumincheck</title>
  <script>
    'use strict'; // 올바른 use strict 구문

    const chnum = [2,3,4,5,6,7,8,9,2,3,4,5];

    function check() {
      // 주민번호 입력값 가져오기 (함수 안에서 가져와야 함)
      let jumin = document.getElementById("jumin").value;

      // 하이픈(-)을 제거 (필요시)
      jumin = jumin.replace(/-/g, '');

      // 유효성 검사 - 13자리 주민번호인지 확인
      if (jumin.length != 13) {
        alert("잘못된 주민번호입니다. 다시 입력해주세요");
        document.getElementById("jumin").focus();
        return; // 오류 시 함수 종료
      }

      let tot = 0; // 숫자 더하기를 위해 tot 초기값을 0으로 설정
      for (let i = 0; i < chnum.length; i++) {
        let temp = jumin.charAt(i) * chnum[i];
        tot += temp;
      }

      // 11로 나눈 나머지 계산
      let calc = tot % 11;
      // 11에서 나머지를 뺀 값
      let result = 11 - calc;

      // 결과값이 10 이상이면 1의 자리 숫자만 사용
      if (result >= 10) {
        result = result % 10;
      }

      // 결과값과 주민번호의 13번째 자리를 비교
      if (result == jumin.charAt(12)) {
        alert("유효한 주민번호입니다.");
      } else {
        alert("유효하지 않은 주민번호입니다.");
      }
    }
  </script>
</head>
<body>
  <pre>
    주민번호 체크하기
    준비물 : 비교할 값을 준비한다. (234567892345)
    1. 자신의 주민번호 앞에서 12자리의 각각의 숫자와 준비한 숫자를 각각 곱한후 더해준다
    2. 결과값 / 11 의 나머지를 구한다
    3. 11에서 나머지를 뺀다
    4. 결과값이 10이상이면 1의 자리 숫자만을 자신의 주민번호 13번째와 비교한다
  </pre>
  <h2>주민등록번호 판독</h2>
  <div class="container">
    <form name="myform">
      <div>주민번호 <input type="text" id="jumin" class="form-control mb-2" placeholder="주민번호 13자리 입력" /></div>
      <div><input type="button" value="체크" onclick="check()" class="form-control mb-2" /></div>
      <div><input type="button" value="다시하기" onclick="location.reload()" class="form-control mb-2" /></div>
    </form>
  </div>
</body>
</html>
